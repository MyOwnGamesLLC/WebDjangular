<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02"
  (click)="isNavbarCollapsed = !isNavbarCollapsed" aria-controls="navbarColor02" aria-expanded="false"
  aria-label="Toggle navigation">
  <span class="navbar-toggler-icon"><i class="fas fa-bars"></i></span>
</button>

<ng-template #simpleMenu let-item="item">
  <li class="nav-item {{ item?.class }}" [routerLinkActive]="['active']">
    <a class="nav-link" (click)="action($event,item)" [innerHtml]="item.name" [href]="item.url"
      [target]="item.target"></a>
  </li>
</ng-template>

<ng-template #dropdownMenu let-item="item">
  <li class="nav-item dropdown {{ item?.class }}" [routerLinkActive]="['active']">
    <div ngbDropdown class="d-inline-block" [autoClose]="true">
      <a class="nav-link" ngbDropdownToggle [innerHtml]="item?.name"></a>
      <div class="shadow-lg" ngbDropdownMenu>
        <a *ngFor="let child of item.children" [href]="child.url" [target]="child.target"
          class="dropdown-item {{ child?.class }}" (click)="action($event,child)">
          <span [class]="child?.icon"></span>
          <span class="name" [innerHtml]="child.name"></span>
        </a>
      </div>
    </div>
  </li>
</ng-template>

<div class="collapse navbar-collapse" [ngbCollapse]="!isNavbarCollapsed" id="navbarSupportedContent">
  <ul class="navbar-nav">
    <ng-container *ngFor="let item of (items | async)">
      <ng-container *ngTemplateOutlet="
          item?.children?.length > 0 ? dropdownMenu : simpleMenu;
          context: { item: item }
        ">
      </ng-container>
    </ng-container>
  </ul>
</div>