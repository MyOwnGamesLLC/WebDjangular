<h1>{{ before_title }} <strong>Product</strong></h1>

<form [formGroup]="form" (ngSubmit)="onSubmit()">

  <div class="row">
    <div class="col-6">
      <nb-card>
        <nb-card-header>Product Type</nb-card-header>
        <nb-card-body>
          <ng-container class="column" *ngFor="let field of form.scaffoldFieldsType">
            <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
              <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                            (relationshipUpdated)="relationship($event)"></ng-container>
            </div>
          </ng-container>
        </nb-card-body>
      </nb-card>
    </div>
  </div>

  <div class="row">
    <div class="col-8">
      <nb-accordion class="mb-3">
        <nb-accordion-item [expanded]="true">
          <nb-accordion-item-header>General information</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <ng-container class="column" *ngFor="let field of form.scaffoldFieldsGeneral">
                <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
                  <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                                (relationshipUpdated)="relationship($event)"></ng-container>
                </div>
              </ng-container>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>

      <nb-accordion class="mb-3">
        <nb-accordion-item>
          <nb-accordion-item-header>Pricing</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <ng-container class="column" *ngFor="let field of form.scaffoldFieldsPricing">
                <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
                  <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                                (relationshipUpdated)="relationship($event)"></ng-container>
                </div>
              </ng-container>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>

      <nb-accordion class="mb-3">
        <nb-accordion-item>
          <nb-accordion-item-header>SEO</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <ng-container class="column" *ngFor="let field of form.scaffoldFieldsSEO">
                <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
                  <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                                (relationshipUpdated)="relationship($event)"></ng-container>
                </div>
              </ng-container>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>

      <nb-accordion class="mb-3">
        <nb-accordion-item>
          <nb-accordion-item-header>Images / Videos</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <div class="col"> <p>Coming soon</p></div>
              <ng-container class="column" *ngFor="let field of form.scaffoldFieldsMedias">
                <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
                  <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                                (relationshipUpdated)="relationship($event)"></ng-container>
                </div>
              </ng-container>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>

    </div>


    <div class="col-4">
      <nb-accordion class="mb-3">
        <nb-accordion-item [expanded]="true">
          <nb-accordion-item-header>Inventory</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <ng-container class="column" *ngFor="let field of form.scaffoldFieldsInventory">
                <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
                  <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                                (relationshipUpdated)="relationship($event)"></ng-container>
                </div>
              </ng-container>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>

      <nb-accordion class="mb-3">
        <nb-accordion-item>
          <nb-accordion-item-header>Shipping</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <ng-container class="column" *ngFor="let field of form.scaffoldFieldsShipping">
                <div [class]="field.wrapper_class ? field.wrapper_class : 'col-12'">
                  <ng-container wdaBuilderFormFields [config]="field" [group]="form"
                                (relationshipUpdated)="relationship($event)"></ng-container>
                </div>
              </ng-container>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>



      <nb-accordion class="mb-3">
        <nb-accordion-item [expanded]="true">
          <nb-accordion-item-header>Attributes</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <div class="col"> <p> load attrs dynamically here</p></div>
            </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>
    </div>
  </div>


  <div class="row" *ngIf="submit">
    <div class="col-12">
      <ng-container *ngIf="save_continue">
        <button nbButton [status]="submit_continue_status" [size]="submit_continue_size" [nbSpinner]="loading"
                [nbSpinnerStatus]="submit_continue_status"
                [disabled]="loading" [nbSpinnerSize]="submit_continue_size" nbSpinnerMessage=""
                (click)="submitForm($event,false)">
          {{ submit_continue_label }}
        </button>
      </ng-container>
      <button nbButton [status]="submit_status" [size]="submit_size" [nbSpinner]="loading"
              [nbSpinnerStatus]="submit_status"
              [disabled]="loading" [nbSpinnerSize]="submit_size" nbSpinnerMessage=""
              (click)="submitForm($event,true)">
        {{ submit_label }}
      </button>
    </div>
  </div>

</form>


<ng-template #productForm>
  COM ID
</ng-template>
