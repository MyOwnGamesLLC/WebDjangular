<div class="step-item">
  <form [formGroup]="formWizardStep02" (ngSubmit)="onSubmit()" autocomplete="off">
    <div class="row mt-4">
      <div class="col-12 col-md-6">
        <div class="row">
          <div class="col-12">
            <h5 class="text-primary mb-3">FORMA DE PAGAMENTO</h5>
          </div>
        </div>
        <div class="row" *ngIf="!showMigration">
          <div class="col-12">
            <h6>Fidelidade</h6>
            <div class="form-group">
              <select class="form-control" formControlName="contractTime">
                <option value="0">Sem Fidelidade</option>
                <option value="1">1 ano</option>
                <option value="2">2 anos</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="showMigration">
          <div class="col-12">
            <h6>Você esta aumentando ou diminuindo sua velocidade de internet?</h6>
          </div>
          <div class="col-12">
            <div class="form-group">
              <div class="custom-control custom-radio ml-3 mb-1">
                <input type="radio" id="upgrade" formControlName="isUpgrade" name="isUpgrade"
                  class="custom-control-input" value="upgrade" />
                <label class="custom-control-label" for="upgrade">Estou aumentando a velocidade
                  (Upgrade)</label>
              </div>
              <div class="custom-control custom-radio ml-3 mb-1">
                <input type="radio" id="downgrade" formControlName="isUpgrade" name="isUpgrade"
                  class="custom-control-input" value="downgrade" />
                <label class="custom-control-label" for="downgrade">Estou diminuindo a velocidade (Downgrade)</label>
              </div>
              <div
                *ngIf="formWizardStep02.get('isUpgrade')?.touched && formWizardStep02.get('isUpgrade')?.errors?.required"
                class="alert alert-danger" role="alert">
                <span>Por favor, selecione se sua migração é para aumentar ou diminuir a velocidade</span>

              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <h6>Como quer receber a fatura?</h6>
          </div>
          <div class="col-12">
            <div class="custom-control custom-radio ml-3 mb-1">
              <input type="radio" id="paymentTypeMail" formControlName="paymentType" name="paymentType"
                class="custom-control-input" value="mail" />
              <label class="custom-control-label" for="paymentTypeMail">Por Correios</label>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-body py-1">
                    <div class="row">
                      <p class="mb-0 col-12">
                        {{ providerCheckout.address.first_name }}
                        {{ providerCheckout.address.last_name }} <br />
                        {{ providerCheckout.address.street_address_1 }},
                        {{ providerCheckout.address.number }}
                        <span *ngIf="providerCheckout.address.street_address_2">
                          - {{ providerCheckout.address.street_address_2 }}
                        </span>
                        <span *ngIf="providerCheckout.address.street_address_3">
                          <br>{{ providerCheckout.address.street_address_3 }}
                        </span>
                        <br />
                        {{ providerCheckout.address.city }},
                        {{ providerCheckout.address.state }}
                        {{ providerCheckout.address.postal_code }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="custom-control custom-radio ml-3 mt-2 mb-1">
              <input type="radio" id="paymentTypeEmail" formControlName="paymentType" name="paymentType"
                class="custom-control-input" value="email" />
              <label class="custom-control-label" for="paymentTypeEmail">Por Email <small>(R$5,00 de desconto nos planos
                  de internet)</small>
              </label>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-body py-1">
                    <div class="row">
                      <p class="mb-0 col-12">
                        {{ providerCheckout.cartService.cart.email }}
                      </p>
                    </div>
                  </div>
                </div>
                <br />
                <p class="text-primary" *ngIf="formWizardStep02.get('paymentType').value == 'email'">
                  <b>IMPORTANTE:</b> Você não receberá faturas por correio. Este
                  email será utilizado para enviar qualquer informação da
                  LPNet. Por favor verifique se nossos emails chegarão
                  corretamente em sua caixa de entrada. Se não chegaram,
                  verifique sua caixa de spam.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-6">
        <div class="row">
          <div class="col-12">
            <h5 class="text-primary mb-3">TERMOS DE USO</h5>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="custom-control custom-checkbox ml-3 mt-2 mb-1" *ngFor="let term of terms">
              <input type="checkbox" class="custom-control-input" [formControlName]="'term-' + term.id"
                [id]="'term-' + term.id" />
              <label class="custom-control-label" [for]="'term-' + term.id">
                <span [innerHTML]="term.content"></span>
              </label>
              <div
                *ngIf="formWizardStep02.controls['term-' + term.id]?.touched && formWizardStep02.controls['term-' + term.id]?.errors?.required"
                class="alert alert-danger" role="alert">
                <span>Este Termo é obrigatório </span>

              </div>

            </div>

            <p>
              O não cumprimento do prazo de Fidelização acarretará na perda da
              Bonificação e como base de cálculo rescisório será utilizado o
              valor integral do Serviço de Instalação.
            </p>
            <hr class="my-2" />
          </div>
        </div>

        <div class="row mt-1">
          <div class="alert alert-danger mt-2" *ngIf="error">
            <h6 class="h-alert"><i class="far fa-frown"></i> Ops!</h6>
            <span [innerHtml]="error"></span>
          </div>
          <div class="col-12">
            <button class="btn btn-primary btn-block btn-large"
              [disabled]="formWizardStep02Submitted || providerCheckout.cartService.cart_updating">
              <span *ngIf="!formWizardStep02Submitted && !providerCheckout.cartService.cart_updating">Confirmar
                assinatura</span>
              <span *ngIf="formWizardStep02Submitted || providerCheckout.cartService.cart_updating"><i
                  class="fa fa-spinner fa-pulse"></i> Carregando</span>
            </button>
          </div>
          <div class="col-10 mt-2 mx-auto">
            <p>
              Ao prosseguir, você confirma sua intenção de assinar o plano
              selecionado e concorda com os nossos termos de uso.
            </p>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-9">
            <div class="form-group">
              <input type="text" readonly id="token-full-url" [value]="providerCheckout.getTokenFullURL()" />
              <span class="highlight"></span> <span class="bar"></span>
              <label>Link do carrinho</label>
            </div>
          </div>
          <div class="col-3">
            <button class="btn btn-primary btn-sm btn-block" type="button"
              (click)="providerCheckout.onCopyTokenFullURL($event)">
              <i class="far fa-copy"></i>
              <span *ngIf="!providerCheckout.copying"> Copiar </span>
              <span *ngIf="providerCheckout.copying"> Copiado </span>
            </button>
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-md-6">
            <a (click)="providerCheckout.restartProviderCheckout(false)" class="btn-summary-details text-und">
              <u>Começar novamente</u>
            </a>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>