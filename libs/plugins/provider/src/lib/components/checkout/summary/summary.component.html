<div class="card sticky-top">
  <div class="card-header">
    <div class="row h-100">
      <div class="col align-self-center">
        RESUMO DO PEDIDO
      </div>
    </div>
  </div>
  <div class="card-body">

    <div class="summary-items-wrapper table-responsive">

      <table class="table ">
        <tbody>
        <tr class="summary-item " [ngClass]="{
            'selected': providerCheckout.selected_internet_plan
            }">
          <td class="icon-wrapper align-middle ">
            <i class="icon icon-globo_big"></i>
          </td>

          <td class="align-middle title">
            <span *ngIf="!providerCheckout.selected_internet_plan">
              INTERNET
            </span>
            <span *ngIf="providerCheckout.selected_internet_plan">
              {{ providerCheckout.selected_internet_plan.product.name }}
            </span>
          </td>
          <td class="summary-action align-middle" *ngIf="!providerCheckout.selected_internet_plan">
            <div class="btn-add-wrapper">
              <button class="btn add h-100" (click)="providerCheckout.openTabInternetPlan()"> Adicionar item</button>
            </div>
          </td>
          <td class="summary-action align-middle" *ngIf="providerCheckout.selected_internet_plan">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span *ngIf="providerCheckout.selected_internet_plan.discount < 0">
                    {{ providerCheckout.selected_internet_plan.base_price }}
                  </span>
                </span>
                <span class="price float-right">
                  {{ providerCheckout.selected_internet_plan.total }}
                </span>
              </span>
              <button type="button" class="remove" aria-label="Close" (click)="providerCheckout.deselectInternetPlan()">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>


        <tr
          class="summary-item selected optionals"
          *ngFor="let plan_optional of providerCheckout.selected_internet_optionals">
          <td class="icon-wrapper align-middle">
            <span *ngIf="plan_optional.product.data.checkout_icon" [class]="'icon ' + plan_optional.product?.data?.checkout_icon"></span>
            <span *ngIf="!plan_optional.product.data.checkout_icon" class="fa fa-globe"></span>
          </td>
          <td class="align-middle title">
            {{ plan_optional.product.name }}
          </td>
          <td class="summary-action align-middle">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span *ngIf="plan_optional.discount < 0">
                    {{ plan_optional.base_price }}
                  </span>
                </span>
                <span class="price float-right">
                  {{ plan_optional.total }}
                </span>
              </span>
              <button type="button" class="remove" aria-label="Close"
                (click)="providerCheckout.removeInternetOptional(plan_optional)">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>

        <tr class="summary-item " [ngClass]="{
            'selected': providerCheckout.selected_tv_plan
            }">
          <td class="icon-wrapper align-middle ">
            <i class="icon icon-tv_big"></i>
          </td>
          <td class="align-middle title">
            <span *ngIf="!providerCheckout.selected_tv_plan">
              TV
            </span>
            <span *ngIf="providerCheckout.selected_tv_plan">
              {{ providerCheckout.selected_tv_plan.product.name }}
            </span>
          </td>
          <td class="summary-action align-middle" *ngIf="!providerCheckout.selected_tv_plan">
            <div class="btn-add-wrapper">
              <button class="btn add h-100" (click)="providerCheckout.openTabTVPlan()"> Adicionar item</button>
            </div>
          </td>
          <td class="summary-action align-middle" *ngIf="providerCheckout.selected_tv_plan">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span *ngIf="providerCheckout.selected_tv_plan.discount < 0">
                    {{ providerCheckout.selected_tv_plan.base_price }}
                  </span>
                </span>
                <span class="price float-right">
                  {{ providerCheckout.selected_tv_plan.total }}
                </span>
              </span>
              <button type="button" class="remove" aria-label="Close" (click)="providerCheckout.deselectTVPlan()">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>

        <tr class="summary-item selected optionals" *ngIf="providerCheckout.selected_extra_tv_decoder.qty > 0">
          <td class="icon-wrapper align-middle ">
            <span class="icon icon-extra-decoder"></span>
          </td>
          <td class="align-middle title">
            {{ providerCheckout.selected_extra_tv_decoder.qty }}
            <span *ngIf="providerCheckout.selected_extra_tv_decoder.qty == 1">
              PONTO ADICIONAL
            </span>
            <span *ngIf="providerCheckout.selected_extra_tv_decoder.qty > 1">
              PONTOS ADICIONAIS
            </span>
          </td>
          <td class="summary-action align-middle">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span>
                  </span>
                </span>
                <span class="price float-right" [innerHTML]="providerCheckout.priceExtraTVDecoder">
                  {{ providerCheckout.selected_tv_plan.total }}
                </span>
              </span>
              <button type="button" class="remove" aria-label="Close"
                (click)="providerCheckout.removeExtraTVDecoder()">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>

        <tr
          class="summary-item selected optionals" *ngFor="let plan_optional of providerCheckout.selected_tv_optionals">
          <td class="icon-wrapper align-middle ">
            <span class="icon icon-squares"></span>
          </td>
          <td class="align-middle title">
            {{ plan_optional.product.name }}
          </td>
          <td class="summary-action align-middle">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span *ngIf="plan_optional.discount < 0">
                    {{ plan_optional.base_price }}
                  </span>
                </span>
                <span class="price float-right">
                  {{ plan_optional.total }}
                </span>
              </span>
              <button type="button" class="remove" aria-label="Close"
                (click)="providerCheckout.removeTVOptional(plan_optional)">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>


        <tr class="summary-item " [ngClass]="{
            'selected': providerCheckout.selected_telephone_plan
            }">
          <td class="icon-wrapper align-middle ">
            <i class="icon icon-telephone"></i>
          </td>
          <td class="align-middle title">
            <span *ngIf="!providerCheckout.selected_telephone_plan">
              TELEFONE
            </span>
            <span *ngIf="providerCheckout.selected_telephone_plan">
              {{ providerCheckout.selected_telephone_plan.product.name }}
            </span>
          </td>
          <td class="summary-action align-middle" *ngIf="!providerCheckout.selected_telephone_plan">
            <div class="btn-add-wrapper">
              <button class="btn add h-100" (click)="providerCheckout.openTabTelephonePlan()"> Adicionar item</button>
            </div>
          </td>
          <td class="summary-action align-middle" *ngIf="providerCheckout.selected_telephone_plan">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span *ngIf="providerCheckout.selected_telephone_plan.discount < 0">
                    {{ providerCheckout.selected_telephone_plan.base_price }}
                  </span>
                </span>
                <span class="price float-right">
                  {{ providerCheckout.selected_telephone_plan.total }}
                </span>
              </span>
              <button type="button" class="remove"
                      aria-label="Close" (click)="providerCheckout.deselectTelephonePlan()">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>

        <tr class="summary-item selected" *ngFor="let plan_optional of providerCheckout.selected_telephone_optionals">
          <td class="icon-wrapper align-middle ">
            <i class="fas fa-2x fa-globe"></i>
          </td>
          <td class="align-middle title">
            {{ plan_optional.product.name }}
          </td>
          <td class="summary-action align-middle">
            <div class="price-wrapper">
              <span class="currency-unit float-left">R$</span>
              <span>
                <span class="price float-right strikethrough">
                  <span *ngIf="plan_optional.discount < 0">
                    {{ plan_optional.base_price }}
                  </span>
                </span>
                <span class="price float-right">
                  {{ plan_optional.total }}
                </span>
              </span>
              <button type="button" class="remove" aria-label="Close"
                (click)="providerCheckout.removeTelephoneOptional(plan_optional)">
                <span aria-hidden="true"><i class="fas fa-times-circle"></i></span>
              </button>
            </div>
          </td>
        </tr>

        <tr class="summary-total-wrapper">
          <td class="align-middle title" colspan="2">
            TOTAL:
          </td>
          <td class="price-wrapper align-middle">
            <span class="currency-unit">R$ </span>
            <span class="price">{{ providerCheckout.subtotal }}</span>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="summary-info-wrapper ">
      <div class="row">
        <div class="col table-responsive">
          <table class="table">
            <tbody>
            <tr *ngFor="let fee of providerCheckout.getFees()">
              <td>{{ fee.data?.name }}</td>
              <td *ngIf="fee.data?.price != 0">
                R${{ fee.data?.price }}
              </td>
              <td *ngIf="fee.data?.price == 0">
                GRÁTIS
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row">
        <!--
        TODO:
        <div class="col text-center mt-2">
          <a href="#" class="btn-summary-details"> DETALHES DA OFERTA </a>
        </div>
        -->
      </div>

    </div>

    <div class="summary-submit-wrapper">
      <div class="row">
        <div class="col text-center">
          <button type="submit" class="btn btn-primary btn-lg"
            [disabled]="!providerCheckout.isBuildingPlanValid()"
            (click)="submit();">
            FINALIZAR ASSINATURA
          </button>
        </div>
      </div>
    </div>


  </div>
</div>
